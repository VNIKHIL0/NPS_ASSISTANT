{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/AI-Tool/nps-assistant/app/api/plan/route.ts"],"sourcesContent":["import { google } from \"@ai-sdk/google\";\r\nimport { streamText } from \"ai\";\r\n\r\nexport const maxDuration = 30;\r\n\r\nexport async function POST(req: Request) {\r\n    const { data, language } = await req.json();\r\n\r\n    const systemPrompt = `You are a retirement planning consultant specializing in India's National Pension System (NPS).\r\n    Your goal is to provide a detailed, educational retirement roadmap based on the following user data:\r\n    - Current Age: ${data.age}\r\n    - Monthly Income: ₹${data.income}\r\n    - Desired Retirement Age: ${data.retirementAge}\r\n    - Current NPS Savings: ₹${data.savings}\r\n    - Desired Monthly Pension: ₹${data.pensionGoal}\r\n    - Risk Profile: ${data.riskProfile}\r\n    \r\n    Language: ${language}\r\n    \r\n    Format the response as clear Markdown with headers and bullet points. Ensure it is in ${language}.\r\n    Include:\r\n    1. Executive Summary: Current readiness and path forward.\r\n    2. Growth Projection: How the corpus grows to age ${data.retirementAge} (assume 10% returns).\r\n    3. Asset Allocation: Equity/Debt mix for a ${data.riskProfile} profile.\r\n    4. Action Plan: Clear steps to achieve the ₹${data.pensionGoal} goal.\r\n    \r\n    Tone: Professional, helpful, and educational.\r\n    Do not include any placeholders or disclaimers in the generated content.`;\r\n\r\n    try {\r\n        const result = await streamText({\r\n            model: google(\"gemini-1.5-flash\"),\r\n            messages: [\r\n                { role: \"system\", content: systemPrompt },\r\n                { role: \"user\", content: `Please generate my personalized NPS retirement roadmap in ${language}. Use the data provided in the system prompt.` }\r\n            ],\r\n        });\r\n\r\n        return result.toTextStreamResponse();\r\n    } catch (error) {\r\n        console.error(\"Error in AI Plan API:\", error);\r\n        return new Response(JSON.stringify({ error: \"Failed to generate plan\" }), {\r\n            status: 500,\r\n            headers: { \"Content-Type\": \"application/json\" }\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,cAAc;AAEpB,eAAe,KAAK,GAAY;IACnC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;IAEzC,MAAM,eAAe,CAAC;;mBAEP,EAAE,KAAK,GAAG,CAAC;uBACP,EAAE,KAAK,MAAM,CAAC;8BACP,EAAE,KAAK,aAAa,CAAC;4BACvB,EAAE,KAAK,OAAO,CAAC;gCACX,EAAE,KAAK,WAAW,CAAC;oBAC/B,EAAE,KAAK,WAAW,CAAC;;cAEzB,EAAE,SAAS;;0FAEiE,EAAE,SAAS;;;sDAG/C,EAAE,KAAK,aAAa,CAAC;+CAC5B,EAAE,KAAK,WAAW,CAAC;gDAClB,EAAE,KAAK,WAAW,CAAC;;;4EAGS,CAAC;IAEzE,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,oKAAU,EAAC;YAC5B,OAAO,IAAA,mKAAM,EAAC;YACd,UAAU;gBACN;oBAAE,MAAM;oBAAU,SAAS;gBAAa;gBACxC;oBAAE,MAAM;oBAAQ,SAAS,CAAC,0DAA0D,EAAE,SAAS,6CAA6C,CAAC;gBAAC;aACjJ;QACL;QAEA,OAAO,OAAO,oBAAoB;IACtC,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAA0B,IAAI;YACtE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAClD;IACJ;AACJ"}}]
}